# Solution0279

## 動態規劃 Ver1

跟 [Solution122](Solution0122.md) 類似

### 找出 dp 和下標的的意義

第 n 天持有股票的最大獲利: dp(n,0)，換算成陣列，求 dp[n-1][0]

第 n 天無持有股票的最大獲利: dp(n,1)，換算成陣列，求 dp[n-1][1]

### 找出 dp 的狀態推導

dp[i][0] 的來源有以下
- 第 i-1 天持有股票的最大獲利，dp[i-1][0]
- 第 i-2 天無持有股票的最大獲利 扣掉 第 i 天買股票的成本，dp[i-2][1] - prices[i]

兩者取最大

dp[i][1] 的來源有以下
- 第 i-1 天無持有股票的最大獲利，dp[i-1][1]
- 第 i-1 天持有股票的最大獲利 加上 第 i 天賣股票的獲利，dp[i-1][0] + prices[i]

### 找出 dp 初始值

dp[0][0] = -prices[0]，第一天前面不會再有前一天了，只有買入股票此一情況

dp[0][1] = 0，第一天沒股票可賣

dp[1][0] = Max(dp[0][0] ,-prices[1])，第一天沒股票可賣，所以看前二天中哪一天的股票買入成本較低

dp[1][1] = Max(dp[0][1], dp[0][0] + prices[1])，同上推導，比較第一天就無持有 和 第一天持有且在第二天賣出 何者獲利較高

### 複雜度

#### Time: O(n)

#### Space: O(n)

--- 

## 動態規劃 Ver2

對我來說，這比較難想

### 找出 dp 的狀態推導

定義四個狀態
- 狀態一：第 i 天有股票的狀態，dp[i][0]
- 狀態二：第 i 天維持沒有股票的狀態，dp[i][1]
- 狀態三：第 i 天當天賣出股票的狀態，dp[i][2]
- 狀態四：第 i 天為冷凍期的狀態，dp[i][3]

狀態一(dp[i][0]) 來源有以下
- 維持狀態一，dp[i-1][0]
- 從狀態三買入股票，dp[i-1][1] + prices[i]
- 從狀態四買入股票，dp[i-1][3] + prices[i]

取最大

狀態二(dp[i][1]) 來源有以下
- 維持狀態二，dp[i-1][1]
- 從狀態四過來，dp[i-1][3]
  
取最大

狀態三(dp[i][2]) 來源有以下
- 從狀態一賣出股票，dp[i-1][0] + prices[i]

狀態四(dp[i][3]) 來源有以下
- 從狀態三過來，dp[i-1][1]

### 找出 dp 初始值

dp[0][0] = - prices[0]

dp[0][1] = 0

dp[0][2] = 0

dp[0][3] = 0

### 複雜度

#### Time: O(n)

#### Space: O(n)