# Solution0123

## 暴力法

我沒想到怎麼用動態規劃解這題，我想到將 prices 切成兩段，每段各算出最大的獲利再相加，然後逐一算出每一段的最大獲利再找最大值，這應該算暴力法

### 複雜度

#### Time: O(n<sup>2</sup>)

#### Memory: O(n)

---

## 動態規劃

跟 [Solution122](Solution0122.md) 類似，獲利得累積到下一天，但被限制最多買賣兩次

### 找出 dp 和下標的的意義

第 n 天且第一次持有股票的最大獲利: dp(n, 0)，換算成陣列，求 dp[n-1][0]

第 n 天且第一次無持有股票的最大獲利: dp(n, 1)，換算成陣列，求 dp[n-1][1]

第 n 天且第二次持有股票的最大獲利: dp(n, 2)，換算成陣列，求 dp[n-1][2]

第 n 天且第二次無持有股票的最大獲利: dp(n, 3)，換算成陣列，求 dp[n-1][3]

### 找出 dp 的狀態推導

dp[i][0] 的來源有以下
- 第 i-1 天且第一次持有股票的最大獲利，dp[i-1]
- 第 i 天買入股票的最大獲利，-prices[i]

兩者取最大

dp[i][1] 的來源有以下
- 第 i-1 天且第一次無持有股票的最大獲利，dp[i-1][1]
- 第 i-1 天且第一次持有股票的最大獲利 加上 第 i 天賣股票的獲利，dp[i-1][0] + prices[i]

兩者取最大

dp[i][2] 的來源有以下
- 第 i-1 天且第二次持有股票的最大獲利，dp[i-1][2]
- 第 i-1 天且第一次無持有股票的最大獲利 加上 第 i 天買入股票的最大獲利，dp[i-1][1] - prices[i]

兩者取最大

dp[i][3] 的來源有以下
- 第 i-1 天且第二次無持有股票的最大獲利，dp[i-1][3]
- 第 i-1 天且第二次持有股票的最大獲利 加上 第 i 天賣股票的獲利，dp[i-1][2] + prices[i]

兩者取最大

### 找出 dp 初始值

dp[0][0] = -prices[0]，第一天前面不會再有前一天了，只有買入股票此一情況

dp[0][1] = 0，第一天沒股票可賣

dp[0][2] = -prices[0]，這裡最難想，我本來認為第一天不能買第二次股票，但這樣程式跑會錯，需要給 -prices[0]

dp[0][3] = 0，第一天沒股票可賣

### 複雜度

#### Time: O(n)

#### Memory: O(n)